# 7. Views

In Oracle SQL, a **view** is a virtual table based on the result of a SQL query. Views provide a way to simplify complex queries, encapsulate data, and enhance security by restricting access to specific columns or rows of data.

## 1. What is a View?

A view is essentially a saved query that can be treated as a table in other SQL queries. It does not store data itself but retrieves data from underlying tables when queried.

### Benefits of Using Views

- **Simplification**: Views can simplify complex queries by encapsulating them into a single virtual table.
- **Security**: Views can restrict user access to sensitive data by exposing only specific columns or rows.
- **Data Abstraction**: Views provide a layer of abstraction over the database schema, which can help maintain application code if underlying tables change.

## 2. Creating a View

To create a view, you use the `CREATE VIEW` statement, followed by a `SELECT` statement that defines the data the view will represent.

### Basic Syntax

```sql
CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

### Example

```sql
CREATE VIEW employee_salaries AS
SELECT first_name, last_name, salary
FROM employees
WHERE salary > 5000;
```

## 3. Querying a View

Once created, you can query a view just like a regular table.

### Example

```sql
SELECT * FROM employee_salaries;
```

## 4. Updating Data Through a View

You can update, insert, and delete data through a view if the view is updatable. A view is updatable if it meets certain criteria, such as being based on a single table and not containing complex operations like joins or aggregations.

### Updating Example

```sql
UPDATE employee_salaries
SET salary = salary + 500
WHERE first_name = 'John';
```

### Inserting Example

```sql
INSERT INTO employee_salaries (first_name, last_name, salary)
VALUES ('Jane', 'Doe', 6000);
```

### Deleting Example

```sql
DELETE FROM employee_salaries
WHERE first_name = 'John';
```

## 5. Dropping a View

To remove a view, use the `DROP VIEW` statement.

### Syntax

```sql
DROP VIEW view_name;
```

### Example

```sql
DROP VIEW employee_salaries;
```

## 6. Updatable Views

Not all views are updatable. To be updatable, a view must adhere to specific rules, such as:

- The view must be based on a single table.
- The view must not contain `GROUP BY`, `JOIN`, or `DISTINCT` clauses.
- The view must include all columns required by the base table's primary key.

## 7. Materialized Views

A **materialized view** is a type of view that stores the result of the query physically. Unlike a regular view, a materialized view can be refreshed periodically to reflect changes in the underlying tables.

### Creating a Materialized View

```sql
CREATE MATERIALIZED VIEW sales_summary AS
SELECT department_id, SUM(sales_amount) AS total_sales
FROM sales
GROUP BY department_id;
```

### Refreshing a Materialized View

```sql
BEGIN
    DBMS_MVIEW.REFRESH('sales_summary');
END;
```

